{"remainingRequest":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desktop\\rent\\view\\src\\views\\view\\HouseDetailPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\desktop\\rent\\view\\src\\views\\view\\HouseDetailPage.vue","mtime":1770969530517},{"path":"D:\\desktop\\rent\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765027958923},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1765027963512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGFjdGl2ZVBhdGg6IDAsDQogICAgICBkcmF3ZXJIb3VzZU9yZGVyOiBmYWxzZSwNCiAgICAgIGRpcmVjdGlvbjogInJ0bCIsDQogICAgICBzdGFydFRpbWU6IDAsDQogICAgICBoYXNSZWNvcmRlZDogZmFsc2UsIC8vIOmYsuatoumHjeWkjeiusOW9lQ0KICAgICAgaW5kZXhDb3ZlcjogbnVsbCwNCiAgICAgIGhvdXNlSWQ6IG51bGwsDQogICAgICBob3VzZToge30sDQogICAgICBjb3Zlckxpc3Q6IFtdLA0KICAgICAgaG91c2VMaXZpbmdGYWNpbGl0eUxpc3Q6IHt9LA0KICAgICAgY3VycmVudEltYWdlSW5kZXg6IDAsDQogICAgICB1c2VySWQ6IG51bGwsDQogICAgICBhdmF0YXI6ICIiLA0KICAgICAgc2F2ZUxpc3Q6IFtdLCAvLyDnlKjmiLfmlLbol4/mg4XlhrUNCiAgICAgIGRhdGVPcmRlclNwbGl0TGlzdDogW10sDQogICAgICBkZWZhdWx0U2VsZWN0RGF5czogMTUsDQogICAgICBkYXRlT3JkZXJMaXN0OiBbXSwNCiAgICAgIHNlbGN0ZWREYXRlSXRlbTogbnVsbCwNCiAgICAgIHNlbGN0ZWREYXRlU3BsaXRJdGVtOiBudWxsDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFBhdGhJZCgpOw0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7IC8vIOabtOeyvuehrueahOmrmOeyvuW6puaXtumXtA0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJiZWZvcmV1bmxvYWQiLCB0aGlzLmhhbmRsZVBhZ2VMZWF2ZSk7DQogIH0sDQogIGJlZm9yZURlc3Ryb3koKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsIHRoaXMuaGFuZGxlUGFnZUxlYXZlKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGhhbmRsZUNvbmZpcm1PcmRlcigpIHsNCiAgICAgIGlmICh0aGlzLnNlbGN0ZWREYXRlSXRlbSA9PT0gbnVsbCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oIuivt+mAieS4reaXpeacnyIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAodGhpcy5zZWxjdGVkRGF0ZVNwbGl0SXRlbSA9PT0gbnVsbCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oIuivt+mAieS4remihOe6puaXtumXtOautSIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCBob3VzZU9yZGVySW5mbyA9IHsNCiAgICAgICAgICBvcmRlckRhdGU6IHRoaXMuc2VsY3RlZERhdGVJdGVtLA0KICAgICAgICAgIG9yZGVyVGltZVNwbGl0OiB0aGlzLnNlbGN0ZWREYXRlU3BsaXRJdGVtLmxhYmVsLA0KICAgICAgICAgIGhvdXNlSWQ6IHRoaXMuaG91c2VJZA0KICAgICAgICB9Ow0KICAgICAgICBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KGAvaG91c2Utb3JkZXItaW5mby9zYXZlYCwgaG91c2VPcmRlckluZm8pOw0KICAgICAgICB0aGlzLiRtZXNzYWdlKCLpooTnuqbnnIvmiL/miJDlip8iKTsNCiAgICAgICAgdGhpcy5oYW5kbGVDbG9zZSgpOw0KICAgICAgfSBjYXRjaCAoZSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oZS5tZXNzYWdlKTsNCiAgICAgICAgY29uc29sZS5lcnJvcigi6aKE57qm55yL5oi/5aSx6LSlOiIsIGUpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZGF0ZVNlbGVjdGVkKGRhdGUpIHsNCiAgICAgIHRoaXMuc2VsY3RlZERhdGVJdGVtID0gZGF0ZTsNCiAgICB9LA0KICAgIGRhdGVTcGxpdFNlbGVjdGVkKGRhdGUpIHsNCiAgICAgIHRoaXMuc2VsY3RlZERhdGVTcGxpdEl0ZW0gPSBkYXRlOw0KICAgIH0sDQogICAgbGFzdCgpIHsNCiAgICAgIGlmICh0aGlzLmFjdGl2ZVBhdGgtLSA8PSAwKSB0aGlzLmFjdGl2ZVBhdGggPSAxOw0KICAgIH0sDQogICAgbmV4dCgpIHsNCiAgICAgIGlmICh0aGlzLmFjdGl2ZVBhdGgrKyA+PSAxKSB0aGlzLmFjdGl2ZVBhdGggPSAwOw0KICAgIH0sDQogICAgaGFuZGxlQ2xvc2UoKSB7DQogICAgICB0aGlzLmRyYXdlckhvdXNlT3JkZXIgPSBmYWxzZTsNCiAgICAgIHRoaXMuc2VsY3RlZERhdGVJdGVtID0gbnVsbDsNCiAgICAgIHRoaXMuc2VsY3RlZERhdGVTcGxpdEl0ZW0gPSBudWxsOw0KICAgIH0sDQogICAgaGFuZGxlUGFnZUxlYXZlKCkgew0KICAgICAgaWYgKHRoaXMuaGFzUmVjb3JkZWQpIHJldHVybjsNCg0KICAgICAgY29uc3QgZW5kVGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOw0KICAgICAgY29uc3Qgc3RheVRpbWUgPSBNYXRoLmZsb29yKGVuZFRpbWUgLSB0aGlzLnN0YXJ0VGltZSk7DQoNCiAgICAgIHRoaXMuaGFzUmVjb3JkZWQgPSB0cnVlOw0KDQogICAgICB0aGlzLnNlbmRTdGF5VGltZShzdGF5VGltZSk7DQogICAgfSwNCiAgICBnZXRQYXRoSWQoKSB7DQogICAgICB0aGlzLmhvdXNlSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsNCiAgICAgIHRoaXMuZmV0Y2hIb3VzZUluZm8odGhpcy5ob3VzZUlkKTsNCiAgICB9LA0KICAgIGFzeW5jIGZldGNoSG91c2VJbmZvKGlkKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuJGF4aW9zLmdldChgL3ZpZXdlci9nZXRIb3VzZUJ5SWQvJHtpZH1gKTsNCiAgICAgICAgdGhpcy5ob3VzZSA9IHsgLi4uZGF0YSB9Ow0KICAgICAgICB0aGlzLmNvdmVyTGlzdCA9IChkYXRhLmNvdmVycyB8fCAiIikNCiAgICAgICAgICAuc3BsaXQoIiwiKQ0KICAgICAgICAgIC5maWx0ZXIodXJsID0+IHVybC50cmltKCkpDQogICAgICAgICAgLm1hcCh1cmwgPT4gKHsNCiAgICAgICAgICAgIHVpZDogRGF0ZS5ub3coKSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApLA0KICAgICAgICAgICAgdXJsOiB1cmwudHJpbSgpDQogICAgICAgICAgfSkpOw0KICAgICAgICB0aGlzLmhvdXNlTGl2aW5nRmFjaWxpdHlMaXN0ID0gSlNPTi5wYXJzZSgNCiAgICAgICAgICBkYXRhLmxpdmluZ0ZhY2lsaXRpZXMgfHwgInt9Ig0KICAgICAgICApOw0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6I635Y+W5oi/5bGL5L+h5oGv5aSx6LSlIik7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZ2V0RmFjaWxpdHlJY29uKGtleSkgew0KICAgICAgY29uc3QgaWNvbk1hcCA9IHsNCiAgICAgICAgZnJpZGdlOiAiZWwtaWNvbi1yZWZyaWdlcmF0b3IiLA0KICAgICAgICB3YXNoaW5nOiAiZWwtaWNvbi13YXNoaW5nLW1hY2hpbmUiLA0KICAgICAgICB3YXRlcjogImVsLWljb24td2F0ZXItY3VwIiwNCiAgICAgICAgbmV0d29yazogImVsLWljb24tbW9uaXRvciIsDQogICAgICAgIHNvZmE6ICJlbC1pY29uLXNob3BwaW5nLWNhcnQiLA0KICAgICAgICBjb29raW5nOiAiZWwtaWNvbi1rbmlmZS1mb3JrIiwNCiAgICAgICAgdHY6ICJlbC1pY29uLXZpZGVvLWNhbWVyYSIsDQogICAgICAgIGFjOiAiZWwtaWNvbi1jb2xkLWRyaW5rIiwNCiAgICAgICAgd2FyZHJvYmU6ICJlbC1pY29uLXN1aXRjYXNlIiwNCiAgICAgICAgYmVkOiAiZWwtaWNvbi1iZWQiLA0KICAgICAgICBiYXRocm9vbTogImVsLWljb24tc3VubnkiLA0KICAgICAgICBiYWxjb255OiAiZWwtaWNvbi1vZmZpY2UtYnVpbGRpbmciLA0KICAgICAgICBoZWF0aW5nOiAiZWwtaWNvbi1zdW5yaXNlIiwNCiAgICAgICAgY2FiaW5ldDogImVsLWljb24tYm94Ig0KICAgICAgfTsNCiAgICAgIHJldHVybiBpY29uTWFwW2tleV0gfHwgImVsLWljb24tY2lyY2xlLWNoZWNrIjsNCiAgICB9LA0KICAgIGNvbnRhY3RMYW5kbG9yZCgpIHsNCiAgICAgIHRoaXMuZHJhd2VySG91c2VPcmRlciA9IHRydWU7DQogICAgfSwNCiAgICAvLyDmlLbol4/mk43kvZwNCiAgICBhc3luYyBjb2xsZWN0SG91c2VPcGVyYXRpb24oKSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCBmbG93SW5kZXggPSB7DQogICAgICAgICAgY29udGVudElkOiB0aGlzLmhvdXNlSWQsDQogICAgICAgICAgY29udGVudFR5cGU6ICJIT1VTRV9JTkZPIg0KICAgICAgICB9Ow0KICAgICAgICBjb25zdCB7IG1lc3NhZ2UgfSA9IGF3YWl0IHRoaXMuJGF4aW9zLnBvc3QoDQogICAgICAgICAgYC9mbG93LWluZGV4L3NhdmVPcGVyYXRpb25gLA0KICAgICAgICAgIGZsb3dJbmRleA0KICAgICAgICApOw0KICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7DQogICAgICAgICAgdGl0bGU6ICLmlLbol4/mk43kvZwiLA0KICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsDQogICAgICAgICAgcG9zaXRpb246ICJidXR0b20tcmlnaHQiLA0KICAgICAgICAgIGR1cmF0aW9uOiAxMDAwDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnJlY29yZFNhdmVTdGF0dXModGhpcy5ob3VzZUlkKTsNCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoZXJyb3IpOw0KICAgICAgICBjb25zb2xlLmluZm8oZXJyb3IpOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["HouseDetailPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HouseDetailPage.vue","sourceRoot":"src/views/view","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"house-detail-container\">\r\n      <div style=\"margin-bottom: 20px;\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n          <el-breadcrumb-item :to=\"{ path: '/view' }\">首页</el-breadcrumb-item>\r\n\r\n          <el-breadcrumb-item>{{ house.name }}</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n      </div>\r\n\r\n      <!-- 顶部图片展示区 -->\r\n      <div class=\"gallery-section\">\r\n        <div class=\"main-image\">\r\n          <img\r\n            v-if=\"coverList.length > 0\"\r\n            :src=\"coverList[currentImageIndex].url\"\r\n            alt=\"房屋封面图\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"thumbnail-list\">\r\n          <div\r\n            v-for=\"(cover, index) in coverList\"\r\n            :key=\"cover.uid\"\r\n            class=\"thumbnail\"\r\n            @click=\"currentImageIndex = index\"\r\n          >\r\n            <img :src=\"cover.url\" alt=\"房屋实景图\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 基本信息区 -->\r\n      <div class=\"basic-info-section\">\r\n        <h1 class=\"house-title\">{{ house.name }}</h1>\r\n\r\n        <div class=\"price-section\">\r\n          <span class=\"price\">¥{{ house.rent }}</span>\r\n\r\n          <span class=\"unit\">/月</span>\r\n\r\n          <span class=\"deposit-method\">{{ house.depositMethodName }}</span>\r\n        </div>\r\n\r\n        <div class=\"meta-info\">\r\n          <div class=\"meta-item\">\r\n            <i class=\"el-icon-location\"></i>\r\n\r\n            <span>{{ house.cityAreaName }} · {{ house.communityName }}</span>\r\n          </div>\r\n\r\n          <div class=\"meta-item\">\r\n            <i class=\"el-icon-house\"></i>\r\n\r\n            <span>{{ house.typeName }} · {{ house.sizeNumber }}m²</span>\r\n          </div>\r\n\r\n          <div class=\"meta-item\">\r\n            <i class=\"el-icon-position\"></i>\r\n\r\n            <span>{{ house.directionName }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 详细信息区 -->\r\n      <div class=\"detail-section\">\r\n        <div class=\"section-title\">房屋详情</div>\r\n\r\n        <div class=\"detail-grid\">\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">户型</span>\r\n\r\n            <span class=\"value\">{{ house.sizedName }}</span>\r\n          </div>\r\n\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">楼层</span>\r\n\r\n            <span class=\"value\">{{ house.floor }}</span>\r\n          </div>\r\n\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">装修</span>\r\n\r\n            <span class=\"value\">{{ house.fitmentStatusName }}</span>\r\n          </div>\r\n\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">地铁</span>\r\n\r\n            <span class=\"value\">{{\r\n              house.isSubway ? `${house.subwayLine}号线` : \"不临近\"\r\n            }}</span>\r\n          </div>\r\n\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">租赁方式</span>\r\n\r\n            <span class=\"value\">{{ house.rentalTypeName }}</span>\r\n          </div>\r\n\r\n          <div class=\"detail-item\">\r\n            <span class=\"label\">发布时间</span>\r\n\r\n            <span class=\"value\">{{ house.createTime }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 设施配置区 -->\r\n      <div class=\"facilities-section\">\r\n        <div class=\"section-title\">生活设施</div>\r\n\r\n        <div class=\"facilities-grid\">\r\n          <div\r\n            v-for=\"(item, key) in houseLivingFacilityList\"\r\n            :key=\"key\"\r\n            class=\"facility-item\"\r\n            :class=\"{ available: Boolean(item.selected) }\"\r\n          >\r\n            <i :class=\"getFacilityIcon(key)\"></i>\r\n\r\n            <span>{{ item.label }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 房屋描述 -->\r\n      <div class=\"description-section\">\r\n        <div class=\"section-title\">房屋描述</div>\r\n\r\n        <div class=\"description-content\" v-html=\"house.detail\"></div>\r\n      </div>\r\n\r\n      <!-- 底部操作栏 -->\r\n      <div class=\"action-bar\">\r\n        <div class=\"contact-info\">\r\n          <div class=\"avatar\">\r\n            <img :src=\"house.landlordAvatar\" alt=\"房东头像\" />\r\n          </div>\r\n\r\n          <div class=\"info\">\r\n            <div class=\"name\">{{ house.landlordName }}</div>\r\n\r\n            <div class=\"role\">房东</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      activePath: 0,\r\n      drawerHouseOrder: false,\r\n      direction: \"rtl\",\r\n      startTime: 0,\r\n      hasRecorded: false, // 防止重复记录\r\n      indexCover: null,\r\n      houseId: null,\r\n      house: {},\r\n      coverList: [],\r\n      houseLivingFacilityList: {},\r\n      currentImageIndex: 0,\r\n      userId: null,\r\n      avatar: \"\",\r\n      saveList: [], // 用户收藏情况\r\n      dateOrderSplitList: [],\r\n      defaultSelectDays: 15,\r\n      dateOrderList: [],\r\n      selctedDateItem: null,\r\n      selctedDateSplitItem: null\r\n    };\r\n  },\r\n  created() {\r\n    this.getPathId();\r\n  },\r\n  mounted() {\r\n    this.startTime = performance.now(); // 更精确的高精度时间\r\n    window.addEventListener(\"beforeunload\", this.handlePageLeave);\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener(\"beforeunload\", this.handlePageLeave);\r\n  },\r\n  methods: {\r\n    async handleConfirmOrder() {\r\n      if (this.selctedDateItem === null) {\r\n        this.$message.info(\"请选中日期\");\r\n        return;\r\n      }\r\n      if (this.selctedDateSplitItem === null) {\r\n        this.$message.info(\"请选中预约时间段\");\r\n        return;\r\n      }\r\n      try {\r\n        const houseOrderInfo = {\r\n          orderDate: this.selctedDateItem,\r\n          orderTimeSplit: this.selctedDateSplitItem.label,\r\n          houseId: this.houseId\r\n        };\r\n        await this.$axios.post(`/house-order-info/save`, houseOrderInfo);\r\n        this.$message(\"预约看房成功\");\r\n        this.handleClose();\r\n      } catch (e) {\r\n        this.$message.info(e.message);\r\n        console.error(\"预约看房失败:\", e);\r\n      }\r\n    },\r\n    dateSelected(date) {\r\n      this.selctedDateItem = date;\r\n    },\r\n    dateSplitSelected(date) {\r\n      this.selctedDateSplitItem = date;\r\n    },\r\n    last() {\r\n      if (this.activePath-- <= 0) this.activePath = 1;\r\n    },\r\n    next() {\r\n      if (this.activePath++ >= 1) this.activePath = 0;\r\n    },\r\n    handleClose() {\r\n      this.drawerHouseOrder = false;\r\n      this.selctedDateItem = null;\r\n      this.selctedDateSplitItem = null;\r\n    },\r\n    handlePageLeave() {\r\n      if (this.hasRecorded) return;\r\n\r\n      const endTime = performance.now();\r\n      const stayTime = Math.floor(endTime - this.startTime);\r\n\r\n      this.hasRecorded = true;\r\n\r\n      this.sendStayTime(stayTime);\r\n    },\r\n    getPathId() {\r\n      this.houseId = this.$route.query.id;\r\n      this.fetchHouseInfo(this.houseId);\r\n    },\r\n    async fetchHouseInfo(id) {\r\n      try {\r\n        const { data } = await this.$axios.get(`/viewer/getHouseById/${id}`);\r\n        this.house = { ...data };\r\n        this.coverList = (data.covers || \"\")\r\n          .split(\",\")\r\n          .filter(url => url.trim())\r\n          .map(url => ({\r\n            uid: Date.now() + Math.floor(Math.random() * 1000),\r\n            url: url.trim()\r\n          }));\r\n        this.houseLivingFacilityList = JSON.parse(\r\n          data.livingFacilities || \"{}\"\r\n        );\r\n      } catch (error) {\r\n        this.$message.error(\"获取房屋信息失败\");\r\n        console.error(error);\r\n      }\r\n    },\r\n    getFacilityIcon(key) {\r\n      const iconMap = {\r\n        fridge: \"el-icon-refrigerator\",\r\n        washing: \"el-icon-washing-machine\",\r\n        water: \"el-icon-water-cup\",\r\n        network: \"el-icon-monitor\",\r\n        sofa: \"el-icon-shopping-cart\",\r\n        cooking: \"el-icon-knife-fork\",\r\n        tv: \"el-icon-video-camera\",\r\n        ac: \"el-icon-cold-drink\",\r\n        wardrobe: \"el-icon-suitcase\",\r\n        bed: \"el-icon-bed\",\r\n        bathroom: \"el-icon-sunny\",\r\n        balcony: \"el-icon-office-building\",\r\n        heating: \"el-icon-sunrise\",\r\n        cabinet: \"el-icon-box\"\r\n      };\r\n      return iconMap[key] || \"el-icon-circle-check\";\r\n    },\r\n    contactLandlord() {\r\n      this.drawerHouseOrder = true;\r\n    },\r\n    // 收藏操作\r\n    async collectHouseOperation() {\r\n      try {\r\n        const flowIndex = {\r\n          contentId: this.houseId,\r\n          contentType: \"HOUSE_INFO\"\r\n        };\r\n        const { message } = await this.$axios.post(\r\n          `/flow-index/saveOperation`,\r\n          flowIndex\r\n        );\r\n        this.$notify.success({\r\n          title: \"收藏操作\",\r\n          message: message,\r\n          position: \"buttom-right\",\r\n          duration: 1000\r\n        });\r\n        this.recordSaveStatus(this.houseId);\r\n      } catch (error) {\r\n        this.$message.error(error);\r\n        console.info(error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.house-order-drawer {\r\n  padding: 20px;\r\n\r\n  .contact-info {\r\n    display: flex;\r\n    padding: 10px 4px;\r\n    align-items: center;\r\n    background-color: rgb(246, 246, 246);\r\n    margin-bottom: 10px;\r\n\r\n    .avatar {\r\n      width: 50px;\r\n      height: 50px;\r\n      margin-right: 15px;\r\n      border-radius: 50%;\r\n      overflow: hidden;\r\n\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n        object-fit: cover;\r\n      }\r\n    }\r\n\r\n    .info {\r\n      .name {\r\n        font-size: 24px;\r\n        font-weight: 600;\r\n        margin-bottom: 5px;\r\n      }\r\n\r\n      .role {\r\n        font-size: 14px;\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n\r\n  .item-date {\r\n    padding: 10px 0;\r\n    background-color: rgb(246, 246, 246);\r\n    border: 1px solid rgb(246, 246, 246);\r\n    text-align: center;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      background-color: rgb(244, 244, 244);\r\n    }\r\n  }\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.fun-container {\r\n  width: calc(100% - 900px);\r\n  position: sticky;\r\n  top: 10px; // 与顶部保持间距\r\n  align-self: flex-start; // 避免被拉伸\r\n  height: fit-content; // 高度自适应内容\r\n  margin-left: 10px; // 与左侧内容间隔\r\n  padding: 15px;\r\n  border-radius: 8px;\r\n  background: #fff;\r\n}\r\n\r\n.house-detail-container {\r\n  width: 800px;\r\n  padding: 20px;\r\n  background-color: rgb(255, 255, 255);\r\n  // box-shadow: 0 4px 8px rgb(240,240,240);\r\n  font-family: \"PingFang SC\", \"Microsoft YaHei\", sans-serif;\r\n}\r\n\r\n/* 图片展示区 */\r\n.gallery-section {\r\n  margin-bottom: 30px;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  // box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\r\n  .main-image {\r\n    height: auto;\r\n    // background: #f5f5f5;\r\n\r\n    img {\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: cover;\r\n    }\r\n  }\r\n\r\n  .thumbnail-list {\r\n    display: flex;\r\n    padding: 10px;\r\n    background: #fff;\r\n    border: 1px solid rgb(240, 240, 240);\r\n    overflow-x: auto;\r\n\r\n    .thumbnail {\r\n      width: 100px;\r\n      height: 80px;\r\n      margin-right: 10px;\r\n      cursor: pointer;\r\n      border: 2px solid transparent;\r\n      transition: all 0.3s;\r\n\r\n      &:hover {\r\n        border-color: #409eff;\r\n      }\r\n\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n        object-fit: cover;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 基本信息区 */\r\n.basic-info-section {\r\n  margin-bottom: 30px;\r\n  padding: 10px 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  // box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 1000;\r\n\r\n  .house-title {\r\n    font-size: 30px;\r\n    margin-bottom: 15px;\r\n    color: #333;\r\n    font-weight: 600;\r\n  }\r\n\r\n  .price-section {\r\n    margin-bottom: 20px;\r\n\r\n    .price {\r\n      font-size: 28px;\r\n      color: #f56c6c;\r\n      font-weight: 700;\r\n    }\r\n\r\n    .unit {\r\n      font-size: 16px;\r\n      color: #999;\r\n      margin-right: 15px;\r\n    }\r\n\r\n    .deposit-method {\r\n      font-size: 14px;\r\n      color: #666;\r\n      background: #f5f5f5;\r\n      padding: 4px 8px;\r\n      border-radius: 4px;\r\n    }\r\n  }\r\n\r\n  .meta-info {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    gap: 20px;\r\n\r\n    .meta-item {\r\n      display: flex;\r\n      align-items: center;\r\n      color: #666;\r\n\r\n      i {\r\n        margin-right: 5px;\r\n        font-size: 16px;\r\n      }\r\n\r\n      span {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 详细信息区 */\r\n.detail-section {\r\n  margin-bottom: 30px;\r\n  padding: 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n\r\n  .section-title {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    margin-bottom: 20px;\r\n    color: #333;\r\n    padding-bottom: 10px;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n\r\n  .detail-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(3, 1fr);\r\n    gap: 15px;\r\n\r\n    .detail-item {\r\n      display: flex;\r\n      justify-content: space-between;\r\n\r\n      .label {\r\n        color: #999;\r\n      }\r\n\r\n      .value {\r\n        font-weight: 500;\r\n        color: #333;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 设施配置区 */\r\n.facilities-section {\r\n  margin-bottom: 30px;\r\n  padding: 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  // box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n\r\n  .section-title {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    margin-bottom: 20px;\r\n    color: #333;\r\n    padding-bottom: 10px;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n\r\n  .facilities-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(4, 1fr);\r\n    gap: 15px;\r\n\r\n    .facility-item {\r\n      display: flex;\r\n      align-items: center;\r\n      padding: 8px;\r\n      border-radius: 4px;\r\n      background: #f9f9f9;\r\n      color: #999;\r\n\r\n      &.available {\r\n        background: #f0f9eb;\r\n        color: #67c23a;\r\n\r\n        i {\r\n          color: #67c23a;\r\n        }\r\n      }\r\n\r\n      i {\r\n        margin-right: 8px;\r\n        font-size: 18px;\r\n      }\r\n\r\n      span {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* 房屋描述区 */\r\n.description-section {\r\n  margin-bottom: 30px;\r\n  padding: 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n\r\n  .section-title {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    margin-bottom: 20px;\r\n    color: #333;\r\n    padding-bottom: 10px;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n\r\n  .description-content {\r\n    line-height: 1.8;\r\n    color: #666;\r\n\r\n    v::deep p {\r\n      margin-bottom: 15px;\r\n    }\r\n\r\n    v::deep img {\r\n      max-width: 100%;\r\n      height: auto;\r\n      margin: 10px 0;\r\n      border-radius: 4px;\r\n    }\r\n  }\r\n}\r\n\r\n/* 底部操作栏 */\r\n.action-bar {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 15px 20px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  // box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n\r\n  .contact-info {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .avatar {\r\n      width: 50px;\r\n      height: 50px;\r\n      margin-right: 15px;\r\n      border-radius: 50%;\r\n      overflow: hidden;\r\n\r\n      img {\r\n        width: 100%;\r\n        height: 100%;\r\n        object-fit: cover;\r\n      }\r\n    }\r\n\r\n    .info {\r\n      .name {\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        margin-bottom: 5px;\r\n      }\r\n\r\n      .role {\r\n        font-size: 12px;\r\n        color: #999;\r\n      }\r\n    }\r\n  }\r\n\r\n  .action-buttons {\r\n    .el-button {\r\n      margin-left: 15px;\r\n      padding: 10px 20px;\r\n    }\r\n  }\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .detail-grid {\r\n    grid-template-columns: repeat(2, 1fr) !important;\r\n  }\r\n\r\n  .facilities-grid {\r\n    grid-template-columns: repeat(2, 1fr) !important;\r\n  }\r\n\r\n  .action-bar {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n\r\n    .action-buttons {\r\n      margin-top: 15px;\r\n      width: 100%;\r\n\r\n      .el-button {\r\n        width: 100%;\r\n        margin-left: 0;\r\n        margin-bottom: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}