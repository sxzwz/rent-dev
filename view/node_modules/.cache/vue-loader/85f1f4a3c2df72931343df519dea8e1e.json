{"remainingRequest":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desktop\\rent\\view\\src\\components\\LineChart.vue?vue&type=style&index=0&id=6760596c&scoped=true&lang=css&","dependencies":[{"path":"D:\\desktop\\rent\\view\\src\\components\\LineChart.vue","mtime":1748502400000},{"path":"D:\\desktop\\rent\\view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1765027960330},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1765027965207},{"path":"D:\\desktop\\rent\\view\\node_modules\\postcss-loader\\src\\index.js","mtime":1765027962540},{"path":"D:\\desktop\\rent\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765027958923},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1765027963512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmxpbmUtY2hhcnQtY29udGFpbmVyIHsNCiAgd2lkdGg6IDEwMCU7DQogIGhlaWdodDogMTAwJTsNCiAgZGlzcGxheTogZmxleDsNCiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICBvdmVyZmxvdzogaGlkZGVuOw0KfQ0KDQouY2hhcnQtaGVhZGVyOjphZnRlciB7DQogIGNvbnRlbnQ6ICcnOw0KICB3aWR0aDogMTAwcHg7DQogIGhlaWdodDogMTJweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgxMDksIDExNSwgMjMyLCAwLjQpOw0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHRvcDogMzBweDsNCiAgbGVmdDogNTBweDsNCn0NCg0KLmNoYXJ0LWhlYWRlciB7DQogIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBwYWRkaW5nOiAxMnB4IDE2cHg7DQp9DQoNCi5jaGFydC10aXRsZSB7DQogIGZvbnQtc2l6ZTogMjRweDsNCiAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgei1pbmRleDogMTAwOw0KfQ0KDQouY2hhcnQtY29udHJvbHMgew0KICBkaXNwbGF5OiBmbGV4Ow0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpOw0KICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICBwYWRkaW5nOiAycHggNHB4Ow0KICBnYXA6IDRweDsNCiAgYm9yZGVyLXJhZGl1czogNHB4Ow0KfQ0KDQo6OnYtZGVlcCAuZWwtc2VsZWN0IC5lbC1pbnB1dF9faW5uZXIgew0KICB3aWR0aDogMTAwcHggIWltcG9ydGFudDsNCiAgbWluLXdpZHRoOiAxMDBweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0NiwgMjQ2LCAyNDYpOw0KICBib3JkZXI6IG5vbmU7DQp9DQoNCi50aW1lLWxhYmVsIHsNCiAgZm9udC1zaXplOiAxMnB4Ow0KICBjb2xvcjogIzY2NjsNCn0NCg0KLmNoYXJ0LXdyYXBwZXIgew0KICBmbGV4OiAxOw0KfQ0K"},{"version":3,"sources":["LineChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"LineChart.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"line-chart-container\" ref=\"container\">\r\n    <div class=\"chart-header\">\r\n      <span class=\"chart-title\">{{ tag }}</span>\r\n      <div class=\"chart-controls\">\r\n        <span class=\"time-label\">时间范围</span>\r\n        <el-select size=\"mini\" v-model=\"selectedValue\" placeholder=\"选择期限\" @change=\"handleTimeChange\">\r\n          <el-option v-for=\"item in timeOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n        </el-select>\r\n      </div>\r\n    </div>\r\n    <div ref=\"chart\" :style=\"{ width: '100%', height: height }\" class=\"chart-wrapper\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: 'EnhancedLineChart',\r\n  props: {\r\n    tag: {\r\n      type: String,\r\n      default: '数据趋势'\r\n    },\r\n    values: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    date: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    height: {\r\n      type: String,\r\n      default: '300px'\r\n    },\r\n    subtext: {\r\n      type: String,\r\n      default: '描述'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      chart: null,\r\n      selectedValue: '最近一年',\r\n      timeOptions: [\r\n        { value: 30, label: '最近30天' },\r\n        { value: 90, label: '最近90天' },\r\n        { value: 365, label: '最近一年' }\r\n      ],\r\n      resizeObserver: null,\r\n      animationType: 'wave',\r\n      resizeTimer: null\r\n    };\r\n  },\r\n  watch: {\r\n    values: {\r\n      handler() {\r\n        this.updateChart();\r\n      },\r\n      deep: true\r\n    },\r\n    date: {\r\n      handler() {\r\n        this.updateChart();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initChart();\r\n    this.setupResizeObserver();\r\n    window.addEventListener('resize', this.handleResize);\r\n  },\r\n  beforeDestroy() {\r\n    this.cleanup();\r\n  },\r\n  methods: {\r\n    initChart() {\r\n      this.chart = echarts.init(this.$refs.chart);\r\n      this.updateChart();\r\n    },\r\n    updateChart() {\r\n      if (!this.chart) return;\r\n\r\n      const option = {\r\n        backgroundColor: 'transparent',\r\n        grid: {\r\n          left: '3%',\r\n          right: '4%',\r\n          top: '15%',\r\n          bottom: '12%',\r\n          containLabel: true\r\n        },\r\n        tooltip: {\r\n          trigger: 'axis',\r\n          axisPointer: {\r\n            type: 'shadow'\r\n          }\r\n        },\r\n        xAxis: {\r\n          type: 'category',\r\n          data: this.date,\r\n          axisLabel: {\r\n            rotate: this.date.length > 15 ? 30 : 0,\r\n            color: '#666',\r\n            interval: 0, // 显示所有日期\r\n            formatter: (value) => {\r\n              return value; // 直接返回日期值\r\n            }\r\n          },\r\n          axisLine: {\r\n            lineStyle: {\r\n              color: '#ddd',\r\n              type: 'dashed'\r\n            }\r\n          },\r\n          axisTick: {\r\n            alignWithLabel: true,\r\n            lineStyle: {\r\n              color: '#ddd',\r\n              type: 'dashed'\r\n            }\r\n          },\r\n          splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: ['#eee'],\r\n              type: 'dashed'\r\n            }\r\n          }\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: '#ddd',\r\n              type: 'dashed'\r\n            }\r\n          },\r\n          axisTick: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: '#ddd',\r\n              type: 'dashed'\r\n            }\r\n          },\r\n          axisLabel: {\r\n            color: '#666'\r\n          },\r\n          splitLine: {\r\n            lineStyle: {\r\n              color: ['#eee'],\r\n              type: 'dashed'\r\n            }\r\n          }\r\n        },\r\n        series: [{\r\n          smooth: 0.2,\r\n          symbol: 'circle',\r\n          name: `${this.subtext}`,\r\n          type: 'line',\r\n          smooth: true,\r\n          data: this.values,\r\n          lineStyle: {\r\n            width: 1,\r\n            color: 'rgb(91, 143, 249)'\r\n          },\r\n          areaStyle: {\r\n            color: 'rgba(91, 143, 249, 0.15)'\r\n          },\r\n          animationType: this.animationType,\r\n          animationDuration: 1500,\r\n          emphasis: {\r\n            symbol: 'circle',\r\n            itemStyle: {\r\n              color: 'rgb(91, 143, 249)',\r\n              borderColor: '#fff',\r\n              borderWidth: 4\r\n            }\r\n          },\r\n          label: {\r\n            show: true,\r\n            position: 'top',\r\n            distance: 10,\r\n            color: '#666',\r\n            fontSize: 12,\r\n            formatter: (params) => {\r\n              return params.value;\r\n            },\r\n            textStyle: {\r\n              shadowColor: 'rgba(0, 0, 0, 0.2)',\r\n              shadowBlur: 1\r\n            }\r\n          }\r\n        }]\r\n      };\r\n\r\n      // 根据日期数量自动调整显示间隔\r\n      if (this.date.length > 30) {\r\n        option.xAxis.axisLabel.interval = Math.floor(this.date.length / 10);\r\n      }\r\n\r\n      this.chart.setOption(option);\r\n    },\r\n    handleTimeChange(value) {\r\n      this.$emit('time-change', value);\r\n    },\r\n    handleResize() {\r\n      if (this.resizeTimer) {\r\n        clearTimeout(this.resizeTimer);\r\n      }\r\n      this.resizeTimer = setTimeout(() => {\r\n        this.chart && this.chart.resize();\r\n        this.resizeTimer = null;\r\n      }, 200);\r\n    },\r\n    setupResizeObserver() {\r\n      if (typeof ResizeObserver === 'undefined') {\r\n        return;\r\n      }\r\n\r\n      this.resizeObserver = new ResizeObserver(entries => {\r\n        for (let entry of entries) {\r\n          if (entry.target === this.$refs.container) {\r\n            this.handleResize();\r\n          }\r\n        }\r\n      });\r\n\r\n      this.resizeObserver.observe(this.$refs.container);\r\n    },\r\n    cleanup() {\r\n      if (this.chart) {\r\n        this.chart.dispose();\r\n        this.chart = null;\r\n      }\r\n\r\n      if (this.resizeObserver) {\r\n        this.resizeObserver.disconnect();\r\n        this.resizeObserver = null;\r\n      }\r\n\r\n      if (this.resizeTimer) {\r\n        clearTimeout(this.resizeTimer);\r\n        this.resizeTimer = null;\r\n      }\r\n\r\n      window.removeEventListener('resize', this.handleResize);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.line-chart-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n}\r\n\r\n.chart-header::after {\r\n  content: '';\r\n  width: 100px;\r\n  height: 12px;\r\n  background-color: rgba(109, 115, 232, 0.4);\r\n  position: absolute;\r\n  top: 30px;\r\n  left: 50px;\r\n}\r\n\r\n.chart-header {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 16px;\r\n}\r\n\r\n.chart-title {\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n  z-index: 100;\r\n}\r\n\r\n.chart-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  background-color: rgb(255, 255, 255);\r\n  box-sizing: border-box;\r\n  padding: 2px 4px;\r\n  gap: 4px;\r\n  border-radius: 4px;\r\n}\r\n\r\n::v-deep .el-select .el-input__inner {\r\n  width: 100px !important;\r\n  min-width: 100px;\r\n  background-color: rgb(246, 246, 246);\r\n  border: none;\r\n}\r\n\r\n.time-label {\r\n  font-size: 12px;\r\n  color: #666;\r\n}\r\n\r\n.chart-wrapper {\r\n  flex: 1;\r\n}\r\n</style>"]}]}