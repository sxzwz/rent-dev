{"remainingRequest":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desktop\\rent\\view\\src\\components\\StatusFlow.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\desktop\\rent\\view\\src\\components\\StatusFlow.vue","mtime":1770970041175},{"path":"D:\\desktop\\rent\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765027958923},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1765027963512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiB7DQogICAgc3RhdHVzUmVjb3Jkczogew0KICAgICAgdHlwZTogQXJyYXksDQogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwNCiAgICAgIHZhbGlkYXRvcjogdmFsdWUgPT4gew0KICAgICAgICByZXR1cm4gdmFsdWUuZXZlcnkoDQogICAgICAgICAgcmVjb3JkID0+DQogICAgICAgICAgICByZWNvcmQuaGFzT3duUHJvcGVydHkoIm9yaWdpblN0YXR1cyIpICYmDQogICAgICAgICAgICByZWNvcmQuaGFzT3duUHJvcGVydHkoIm5ld0lkIikgJiYNCiAgICAgICAgICAgIHJlY29yZC5oYXNPd25Qcm9wZXJ0eSgiY3JlYXRlVGltZSIpDQogICAgICAgICk7DQogICAgICB9DQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBzdGF0dXNDb25maWc6IHsNCiAgICAgICAgMTogew0KICAgICAgICAgIHRleHQ6ICLpooTnuqbkuK0iLA0KICAgICAgICAgIGljb246ICJlbC1pY29uLXRpbWUiLA0KICAgICAgICAgIGNvbG9yOiAiIzQwOUVGRiIsDQogICAgICAgICAgc3RhdHVzOiAicHJvY2VzcyINCiAgICAgICAgfSwNCiAgICAgICAgMjogew0KICAgICAgICAgIHRleHQ6ICLlt7LpooTnuqYiLA0KICAgICAgICAgIGljb246ICJlbC1pY29uLXN1Y2Nlc3MiLA0KICAgICAgICAgIGNvbG9yOiAiIzY3QzIzQSIsDQogICAgICAgICAgc3RhdHVzOiAic3VjY2VzcyINCiAgICAgICAgfSwNCiAgICAgICAgMzogew0KICAgICAgICAgIHRleHQ6ICLpooTnuqblpLHotKUiLA0KICAgICAgICAgIGljb246ICJlbC1pY29uLXdhcm5pbmciLA0KICAgICAgICAgIGNvbG9yOiAiI0U2QTIzQyIsDQogICAgICAgICAgc3RhdHVzOiAiZXJyb3IiDQogICAgICAgIH0sDQogICAgICAgIDQ6IHsNCiAgICAgICAgICB0ZXh0OiAi5bey5Y+W5raIIiwNCiAgICAgICAgICBpY29uOiAiZWwtaWNvbi1jaXJjbGUtY2xvc2UiLA0KICAgICAgICAgIGNvbG9yOiAiI0Y1NkM2QyIsDQogICAgICAgICAgc3RhdHVzOiAiZXJyb3IiDQogICAgICAgIH0sDQogICAgICAgIDU6IHsNCiAgICAgICAgICB0ZXh0OiAi5bey5a6M5oiQIiwNCiAgICAgICAgICBpY29uOiAiZWwtaWNvbi1maW5pc2hlZCIsDQogICAgICAgICAgY29sb3I6ICIjOTA5Mzk5IiwNCiAgICAgICAgICBzdGF0dXM6ICJzdWNjZXNzIg0KICAgICAgICB9DQogICAgICB9DQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBhY3RpdmVTdGVwKCkgew0KICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzUmVjb3Jkcy5sZW5ndGggPyB0aGlzLnN0YXR1c1JlY29yZHMubGVuZ3RoICogMiAtIDEgOiAwOw0KICAgIH0sDQogICAgcHJvY2Vzc1N0YXR1cygpIHsNCiAgICAgIGlmICghdGhpcy5zdGF0dXNSZWNvcmRzLmxlbmd0aCkgcmV0dXJuICJ3YWl0IjsNCiAgICAgIGNvbnN0IGxhc3RTdGF0dXMgPSB0aGlzLnN0YXR1c1JlY29yZHNbdGhpcy5zdGF0dXNSZWNvcmRzLmxlbmd0aCAtIDFdDQogICAgICAgIC5uZXdJZDsNCiAgICAgIHJldHVybiB0aGlzLmdldFN0ZXBTdGF0dXMobGFzdFN0YXR1cyk7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZm9ybWF0VGltZSh0aW1lKSB7DQogICAgICBpZiAoIXRpbWUpIHJldHVybiAiLS0iOw0KICAgICAgdHJ5IHsNCiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOw0KICAgICAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSByZXR1cm4gIuaXoOaViOaXpeacnyI7DQoNCiAgICAgICAgY29uc3QgcGFkID0gbnVtID0+IG51bS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIik7DQogICAgICAgIHJldHVybiBgJHtkYXRlLmdldEZ1bGxZZWFyKCl9LSR7cGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpfS0ke3BhZCgNCiAgICAgICAgICBkYXRlLmdldERhdGUoKQ0KICAgICAgICApfSAke3BhZChkYXRlLmdldEhvdXJzKCkpfToke3BhZChkYXRlLmdldE1pbnV0ZXMoKSl9YDsNCiAgICAgIH0gY2F0Y2ggKGUpIHsNCiAgICAgICAgY29uc29sZS5lcnJvcigi5pel5pyf5qC85byP6ZSZ6K+vOiIsIGUpOw0KICAgICAgICByZXR1cm4gIuaXoOaViOaXpeacnyI7DQogICAgICB9DQogICAgfSwNCg0KICAgIGdldFN0YXR1c1RleHQoc3RhdHVzKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAodGhpcy5zdGF0dXNDb25maWdbc3RhdHVzXSAmJiB0aGlzLnN0YXR1c0NvbmZpZ1tzdGF0dXNdLnRleHQpIHx8DQogICAgICAgICLmnKrnn6XnirbmgIEiDQogICAgICApOw0KICAgIH0sDQoNCiAgICBnZXRTdGF0dXNJY29uKHN0YXR1cykgew0KICAgICAgcmV0dXJuICgNCiAgICAgICAgKHRoaXMuc3RhdHVzQ29uZmlnW3N0YXR1c10gJiYgdGhpcy5zdGF0dXNDb25maWdbc3RhdHVzXS5pY29uKSB8fA0KICAgICAgICAiZWwtaWNvbi1pbmZvIg0KICAgICAgKTsNCiAgICB9LA0KDQogICAgZ2V0U3RhdHVzQ29sb3Ioc3RhdHVzKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAodGhpcy5zdGF0dXNDb25maWdbc3RhdHVzXSAmJiB0aGlzLnN0YXR1c0NvbmZpZ1tzdGF0dXNdLmNvbG9yKSB8fA0KICAgICAgICAiIzkwOTM5OSINCiAgICAgICk7DQogICAgfSwNCg0KICAgIGdldFN0ZXBTdGF0dXMoc3RhdHVzKSB7DQogICAgICByZXR1cm4gKA0KICAgICAgICAodGhpcy5zdGF0dXNDb25maWdbc3RhdHVzXSAmJiB0aGlzLnN0YXR1c0NvbmZpZ1tzdGF0dXNdLnN0YXR1cykgfHwNCiAgICAgICAgIndhaXQiDQogICAgICApOw0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["StatusFlow.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StatusFlow.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"status-flow-container\">\r\n    <div class=\"status-title\">预约状态流转记录</div>\r\n\r\n    <div v-if=\"statusRecords.length === 0\">\r\n      <el-empty description=\"暂无状态流转路径\"></el-empty>\r\n    </div>\r\n\r\n    <el-steps\r\n      direction=\"vertical\"\r\n      :active=\"activeStep\"\r\n      :process-status=\"processStatus\"\r\n      :space=\"100\"\r\n    >\r\n      <div\r\n        v-for=\"(record, index) in statusRecords\"\r\n        :key=\"'record-' + index\"\r\n        class=\"status-record\"\r\n      >\r\n        <el-step\r\n          :title=\"getStatusText(record.originStatus)\"\r\n          :description=\"formatTime(record.createTime)\"\r\n          :icon=\"getStatusIcon(record.originStatus)\"\r\n          :status=\"getStepStatus(record.originStatus)\"\r\n        ></el-step>\r\n\r\n        <el-step\r\n          :title=\"getStatusText(record.newId)\"\r\n          :description=\"formatTime(record.createTime)\"\r\n          :icon=\"getStatusIcon(record.newId)\"\r\n          :status=\"getStepStatus(record.newId)\"\r\n        ></el-step>\r\n      </div>\r\n    </el-steps>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n    statusRecords: {\r\n      type: Array,\r\n      default: () => [],\r\n      validator: value => {\r\n        return value.every(\r\n          record =>\r\n            record.hasOwnProperty(\"originStatus\") &&\r\n            record.hasOwnProperty(\"newId\") &&\r\n            record.hasOwnProperty(\"createTime\")\r\n        );\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      statusConfig: {\r\n        1: {\r\n          text: \"预约中\",\r\n          icon: \"el-icon-time\",\r\n          color: \"#409EFF\",\r\n          status: \"process\"\r\n        },\r\n        2: {\r\n          text: \"已预约\",\r\n          icon: \"el-icon-success\",\r\n          color: \"#67C23A\",\r\n          status: \"success\"\r\n        },\r\n        3: {\r\n          text: \"预约失败\",\r\n          icon: \"el-icon-warning\",\r\n          color: \"#E6A23C\",\r\n          status: \"error\"\r\n        },\r\n        4: {\r\n          text: \"已取消\",\r\n          icon: \"el-icon-circle-close\",\r\n          color: \"#F56C6C\",\r\n          status: \"error\"\r\n        },\r\n        5: {\r\n          text: \"已完成\",\r\n          icon: \"el-icon-finished\",\r\n          color: \"#909399\",\r\n          status: \"success\"\r\n        }\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    activeStep() {\r\n      return this.statusRecords.length ? this.statusRecords.length * 2 - 1 : 0;\r\n    },\r\n    processStatus() {\r\n      if (!this.statusRecords.length) return \"wait\";\r\n      const lastStatus = this.statusRecords[this.statusRecords.length - 1]\r\n        .newId;\r\n      return this.getStepStatus(lastStatus);\r\n    }\r\n  },\r\n  methods: {\r\n    formatTime(time) {\r\n      if (!time) return \"--\";\r\n      try {\r\n        const date = new Date(time);\r\n        if (isNaN(date.getTime())) return \"无效日期\";\r\n\r\n        const pad = num => num.toString().padStart(2, \"0\");\r\n        return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(\r\n          date.getDate()\r\n        )} ${pad(date.getHours())}:${pad(date.getMinutes())}`;\r\n      } catch (e) {\r\n        console.error(\"日期格式错误:\", e);\r\n        return \"无效日期\";\r\n      }\r\n    },\r\n\r\n    getStatusText(status) {\r\n      return (\r\n        (this.statusConfig[status] && this.statusConfig[status].text) ||\r\n        \"未知状态\"\r\n      );\r\n    },\r\n\r\n    getStatusIcon(status) {\r\n      return (\r\n        (this.statusConfig[status] && this.statusConfig[status].icon) ||\r\n        \"el-icon-info\"\r\n      );\r\n    },\r\n\r\n    getStatusColor(status) {\r\n      return (\r\n        (this.statusConfig[status] && this.statusConfig[status].color) ||\r\n        \"#909399\"\r\n      );\r\n    },\r\n\r\n    getStepStatus(status) {\r\n      return (\r\n        (this.statusConfig[status] && this.statusConfig[status].status) ||\r\n        \"wait\"\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.status-flow-container {\r\n  padding: 20px 0;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  // box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n  margin-bottom: 20px;\r\n\r\n  .status-title {\r\n    font-size: 16px;\r\n    font-weight: bold;\r\n    margin-bottom: 20px;\r\n    color: #333;\r\n    padding-left: 10px;\r\n    border-left: 4px solid #409eff;\r\n  }\r\n\r\n  .status-record {\r\n    margin-bottom: 10px;\r\n\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n\r\n  ::v-deep {\r\n    .el-step {\r\n      &__head {\r\n        &.is-process {\r\n          color: #409eff;\r\n          border-color: #409eff;\r\n\r\n          .el-step__icon {\r\n            background: rgba(64, 158, 255, 0.1);\r\n          }\r\n        }\r\n\r\n        &.is-success {\r\n          color: #67c23a;\r\n          border-color: #67c23a;\r\n\r\n          .el-step__icon {\r\n            background: rgba(103, 194, 58, 0.1);\r\n          }\r\n        }\r\n\r\n        &.is-error {\r\n          color: #f56c6c;\r\n          border-color: #f56c6c;\r\n\r\n          .el-step__icon {\r\n            background: rgba(245, 108, 108, 0.1);\r\n          }\r\n        }\r\n\r\n        &.is-wait {\r\n          color: #909399;\r\n          border-color: #909399;\r\n        }\r\n      }\r\n\r\n      &__title {\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n\r\n        &.is-process {\r\n          color: #409eff;\r\n        }\r\n\r\n        &.is-success {\r\n          color: #67c23a;\r\n        }\r\n\r\n        &.is-error {\r\n          color: #f56c6c;\r\n        }\r\n\r\n        &.is-wait {\r\n          color: #909399;\r\n        }\r\n      }\r\n\r\n      &__description {\r\n        font-size: 12px;\r\n        color: #999;\r\n      }\r\n\r\n      &__line {\r\n        left: 11px !important;\r\n        background: linear-gradient(\r\n          to bottom,\r\n          rgba(64, 158, 255, 0.3),\r\n          rgba(103, 194, 58, 0.3)\r\n        ) !important;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}