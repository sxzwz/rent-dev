{"remainingRequest":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desktop\\rent\\view\\src\\views\\admin\\CommunityManage.vue?vue&type=style&index=0&id=506199b8&scoped=true&lang=scss&","dependencies":[{"path":"D:\\desktop\\rent\\view\\src\\views\\admin\\CommunityManage.vue","mtime":1766219114547},{"path":"D:\\desktop\\rent\\view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1765027960330},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1765027965207},{"path":"D:\\desktop\\rent\\view\\node_modules\\postcss-loader\\src\\index.js","mtime":1765027962540},{"path":"D:\\desktop\\rent\\view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1765027958888},{"path":"D:\\desktop\\rent\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765027958923},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1765027963512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5wYWdlciB7DQogIG1hcmdpbi1ibG9jazogMjBweDsNCn0NCg0KLyog6buY6K6k6ZqQ6JeP5pON5L2c5oyJ6ZKuICovDQoub3BlcmF0ZS1idXR0b25zIHsNCiAgb3BhY2l0eTogMDsNCiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjNzOw0KICAvKiDmt7vliqDov4fmuKHmlYjmnpwgKi8NCiAgY3Vyc29yOiBwb2ludGVyOw0KDQogIGkgew0KICAgIHBhZGRpbmc6IDhweDsNCiAgICBib3JkZXItcmFkaXVzOiA2cHg7DQogICAgdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTsNCg0KICAgICY6aG92ZXIgew0KICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzNiwgMjM3LCAyMzgpOw0KICAgIH0NCiAgfQ0KfQ0KDQovKiDooYzmgqzlgZzml7bmmL7npLrmk43kvZzmjInpkq4gKi8NCi5lbC10YWJsZV9fYm9keSB0cjpob3ZlciAub3BlcmF0ZS1idXR0b25zIHsNCiAgb3BhY2l0eTogMTsNCn0NCg0KLmNvbnRhaW5lciB7DQogIG1hcmdpbjogMTBweCAyMHB4Ow0KfQ0KDQoudG9wLWhlYWxkZXIgew0KICBtYXJnaW4tYmxvY2s6IDEwcHg7DQogIHBhZGRpbmctaW5saW5lOiAxMHB4Ow0KICBib3JkZXItcmFkaXVzOiA1cHg7DQogIGRpc3BsYXk6IGZsZXg7DQogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCg0KICAubmF2LWxlZnQsDQogIC5uYXYtcmlnaHQgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBsZWZ0Ow0KICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgZ2FwOiAxMHB4Ow0KICB9DQoNCiAgLm5hdi1sZWZ0IHsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICB9DQp9DQo="},{"version":3,"sources":["CommunityManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0mBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"CommunityManage.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"top-healder\">\r\n      <div class=\"nav-left\">\r\n        <p style=\"font-size: 12px;color: rgb(130,130,130);\">çœä»½</p>\r\n\r\n        <el-select\r\n          size=\"mini\"\r\n          @change=\"handleAreaChange\"\r\n          style=\"width: 100%;\"\r\n          v-model=\"topAreaId\"\r\n          placeholder=\"ä¸é™\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in topArea\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n\r\n        <p style=\"font-size: 12px;color: rgb(130,130,130);\">å¸‚åŒº</p>\r\n\r\n        <el-select\r\n          size=\"mini\"\r\n          style=\"width: 100%;\"\r\n          v-model=\"queryCityAreaId\"\r\n          placeholder=\"ä¸é™\"\r\n        >\r\n          <el-option\r\n            v-for=\"item in cityArea\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n\r\n        <div style=\"text-align: center;\" class=\"primary-bt\" @click=\"reset\">\r\n          é‡ç½®\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"nav-right\">\r\n        <div>\r\n          <AutoInput placeholder=\"æœç´¢å°åŒº\" @listener=\"listener\" />\r\n        </div>\r\n\r\n        <div class=\"primary-bt\" @click=\"saveCommunityOperation\">\r\n          <i class=\"el-icon-plus\"></i>\r\n\r\n          æ–°å¢å°åŒº\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- è¡¨æ ¼åŠåˆ†é¡µä¿¡æ¯ -->\r\n    <div>\r\n      <el-table :data=\"apiResult.data\">\r\n        <el-table-column width=\"200\" prop=\"username\" label=\"å°åŒºå\">\r\n          <template #default=\"scope\">\r\n            <div class=\"over-text\">\r\n              {{ scope.row.name }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          width=\"100\"\r\n          prop=\"topAreaName\"\r\n          label=\"æ‰€åœ¨çœä»½\"\r\n        ></el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"cityAreaName\"\r\n          width=\"108\"\r\n          label=\"æ‰€åœ¨åŸå¸‚\"\r\n        ></el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"createTime\"\r\n          :sortable=\"true\"\r\n          width=\"168\"\r\n          label=\"åˆ›å»ºæ—¶é—´\"\r\n        ></el-table-column>\r\n\r\n        <el-table-column label=\"\" align=\"center\">\r\n          <template #default=\"scope\">\r\n            <div class=\"operate-buttons\">\r\n              <el-dropdown trigger=\"click\" placement=\"bottom-end\">\r\n                <span class=\"el-dropdown-link\">\r\n                  <i class=\"el-icon-more\"></i>\r\n                </span>\r\n\r\n                <el-dropdown-menu slot=\"dropdown\">\r\n                  <el-dropdown-item\r\n                    @click.native=\"handleDetail(scope.row)\"\r\n                    icon=\"el-icon-finished\"\r\n                    >è¯¦æƒ…</el-dropdown-item\r\n                  >\r\n\r\n                  <el-dropdown-item\r\n                    @click.native=\"handleDelete(scope.row)\"\r\n                    icon=\"el-icon-delete\"\r\n                    >åˆ é™¤</el-dropdown-item\r\n                  >\r\n                </el-dropdown-menu>\r\n              </el-dropdown>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- åˆ†é¡µç»„ä»¶åŒºåŸŸ -->\r\n      <div class=\"pager\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"communityQueryDto.current\"\r\n          :page-sizes=\"[10, 20]\"\r\n          :page-size=\"communityQueryDto.size\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"apiResult.total\"\r\n        ></el-pagination>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- åˆ é™¤ç¡®è®¤å¼¹çª— -->\r\n    <el-dialog\r\n      title=\"åˆ é™¤å°åŒºä¿¡æ¯\"\r\n      :show-close=\"false\"\r\n      :visible.sync=\"dialogDeletedVisible\"\r\n      width=\"20%\"\r\n    >\r\n      <span>ç¡®å®šåˆ é™¤å°åŒºä¿¡æ¯æ•°æ®ï¼Ÿ</span>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"mini\" @click=\"dialogDeletedVisible = false\"\r\n          >å–æ¶ˆ</el-button\r\n        >\r\n\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"confirmDeleted\"\r\n          >ç¡®å®š</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- å°åŒºè¯¦æƒ…ä¿¡æ¯ -->\r\n    <el-dialog\r\n      title=\"å°åŒºè¯¦æƒ…ä¿¡æ¯\"\r\n      :show-close=\"false\"\r\n      :visible.sync=\"dialogCommunityVisible\"\r\n      width=\"70%\"\r\n    >\r\n      <div style=\"display: flex;gap: 30px;\">\r\n        <div>\r\n          <div>\r\n            <p\r\n              style=\"color: aliceblue;background-color: rgb(55, 171, 33);padding: 10px 20px;margin-bottom: 0;\"\r\n            >\r\n              *å°åŒºå°é¢å›¾\r\n            </p>\r\n\r\n            <img\r\n              style=\"width: 100%;height: 200px;border-radius: 0px;\"\r\n              :src=\"community.cover\"\r\n              alt=\"\"\r\n              srcset=\"\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <p\r\n              style=\"color: aliceblue;background-color: rgb(55, 171, 33);padding: 10px 20px;margin-bottom: 0;\"\r\n            >\r\n              *å®å†µå›¾\r\n            </p>\r\n\r\n            <Carousel\r\n              :showBtn=\"false\"\r\n              containerHeight=\"200px\"\r\n              :carouselItems=\"carouselItems\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <p\r\n            style=\"color: aliceblue;background-color: rgb(55, 171, 33);padding: 10px 20px;margin-bottom: 0;\"\r\n          >\r\n            *ä»‹ç»\r\n          </p>\r\n\r\n          <div v-html=\"community.detail\"></div>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- å°åŒºä¿¡æ¯æŠ½å±‰ -->\r\n    <el-drawer\r\n      title=\"æ–°å¢å°åŒº\"\r\n      :modal=\"false\"\r\n      :wrapperClosable=\"false\"\r\n      :visible.sync=\"drawer\"\r\n      :direction=\"direction\"\r\n      size=\"40%\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <div style=\"margin-inline: 20px;\">\r\n        <div>\r\n          <el-steps :active=\"active\" finish-status=\"success\">\r\n            <el-step title=\"è¡¥å……åœ°åŒºä¿¡æ¯\"></el-step>\r\n\r\n            <el-step title=\"è¡¥å……å°åŒºåŸºæœ¬ä¿¡æ¯\"></el-step>\r\n\r\n            <el-step title=\"è¡¥å……å°åŒºä»‹ç»\"></el-step>\r\n          </el-steps>\r\n        </div>\r\n\r\n        <div>\r\n          <!-- å°åŒºåœ°åŒºä¿¡æ¯ -->\r\n          <div v-if=\"active === 0\">\r\n            <div>\r\n              <p>*æ‰€å±çœä»½</p>\r\n\r\n              <el-select\r\n                @change=\"handleAreaChange\"\r\n                style=\"width: 100%;\"\r\n                v-model=\"topAreaId\"\r\n                placeholder=\"è¯·é€‰æ‹©\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in topArea\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n\r\n              <p>*æ‰€å±å¸‚åŒº</p>\r\n\r\n              <el-select\r\n                style=\"width: 100%;\"\r\n                v-model=\"cityAreaId\"\r\n                placeholder=\"è¯·é€‰æ‹©\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in cityArea\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :value=\"item.id\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- å°åŒºåŸºæœ¬ä¿¡æ¯ -->\r\n          <div v-if=\"active === 1\">\r\n            <div>\r\n              <p>*å°åŒºæ ‡é¢˜</p>\r\n\r\n              <el-input\r\n                v-model=\"community.name\"\r\n                placeholder=\"è¯·è¾“å…¥å†…å®¹\"\r\n              ></el-input>\r\n            </div>\r\n\r\n            <div>\r\n              <p>*å°åŒºå°é¢</p>\r\n\r\n              <div class=\"user-avatar\">\r\n                <p>ç‚¹å‡»ğŸ“·å¤„å³å¯ä¸Šä¼ å°åŒºå°é¢</p>\r\n\r\n                <img\r\n                  v-if=\"cover\"\r\n                  style=\"width: 200px;height: 140px;border-radius: 5px;\"\r\n                  :src=\"cover || ''\"\r\n                  alt=\"\"\r\n                />\r\n                <el-upload\r\n                  class=\"avatar-uploader\"\r\n                  action=\"file/upload\"\r\n                  :show-file-list=\"false\"\r\n                  :on-success=\"handleImageSuccess\"\r\n                >\r\n                  <i class=\"el-icon-camera-solid\"></i>\r\n                </el-upload>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- å°åŒºä»‹ç» -->\r\n          <div v-if=\"active === 2\">\r\n            <div>\r\n              <p>*å°åŒºå®å†µå›¾</p>\r\n\r\n              <el-upload\r\n                :on-success=\"handleCovers\"\r\n                action=\"file/upload\"\r\n                list-type=\"picture-card\"\r\n                :on-preview=\"handlePictureCardPreview\"\r\n                :on-remove=\"handleRemove\"\r\n              >\r\n                <i class=\"el-icon-plus\"></i>\r\n              </el-upload>\r\n\r\n              <el-dialog :modal=\"false\" :visible.sync=\"dialogVisible\">\r\n                <img\r\n                  style=\"z-index: 1000;\"\r\n                  width=\"100%\"\r\n                  :src=\"dialogImageUrl\"\r\n                  alt=\"\"\r\n                />\r\n              </el-dialog>\r\n            </div>\r\n\r\n            <div>\r\n              <p>*è¡¥å……å°åŒºä»‹ç»</p>\r\n\r\n              <Editor\r\n                :receiveContent=\"content\"\r\n                height=\"300px\"\r\n                api=\"file/upload\"\r\n                @on-listener=\"onListener\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div style=\"display: flex;margin-block: 20px;\">\r\n          <div\r\n            v-if=\"active !== 0\"\r\n            class=\"primary-bt\"\r\n            @click=\"last\"\r\n            style=\"text-align: center;\"\r\n          >\r\n            <i class=\"el-icon-caret-left\"></i>\r\n\r\n            ä¸Šä¸€æ­¥\r\n          </div>\r\n\r\n          <div\r\n            v-if=\"active !== 2\"\r\n            class=\"primary-bt\"\r\n            @click=\"next\"\r\n            style=\"text-align: center;\"\r\n          >\r\n            <i class=\"el-icon-caret-right\"></i>\r\n\r\n            ä¸‹ä¸€æ­¥\r\n          </div>\r\n\r\n          <div\r\n            v-if=\"active === 2\"\r\n            class=\"info-bt\"\r\n            @click=\"saveCommunity\"\r\n            style=\"text-align: center;\"\r\n          >\r\n            æ–°å¢å°åŒºä¿¡æ¯\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// Bç«™ ã€Œç¨‹åºè¾°æ˜Ÿã€åŸåˆ›å‡ºå“\r\nimport AutoInput from \"@/components/AutoInput.vue\"; // è‡ªå·±å°è£…å¥½çš„è¾“å…¥æ¡†ç»„ä»¶\r\nimport Tab from \"@/components/Tab.vue\";\r\nimport Editor from \"@/components/Editor.vue\";\r\nimport Carousel from \"@/components/Carousel.vue\";\r\nexport default {\r\n  components: { AutoInput, Tab, Editor, Carousel }, // æ³¨å†Œç»„ä»¶\r\n  data() {\r\n    return {\r\n      dialogCommunityVisible: false,\r\n      dialogImageUrl: \"\",\r\n      content: \"\",\r\n      carouselItems: [],\r\n      queryCityAreaId: null,\r\n      dialogVisible: false,\r\n      topAreaId: null,\r\n      cityAreaId: null,\r\n      topArea: [],\r\n      cityArea: [],\r\n      cover: \"\", // å°åŒºå°é¢\r\n      active: 0,\r\n      drawer: false,\r\n      direction: \"rtl\",\r\n      id: null, // é¡µé¢å³å°†åˆ é™¤çš„æ•°æ®ID\r\n      apiResult: {\r\n        // åç«¯è¿”å›çš„æŸ¥è¯¢æ•°æ®çš„å“åº”æ•°æ®\r\n        data: [], // æ•°æ®é¡¹\r\n        total: 0 // ç¬¦åˆæ¡ä»¶çš„æ•°æ®æ€»æƒ³ - åˆå§‹èµ‹å€¼ä¸º0\r\n      },\r\n      community: {}, // å°åŒºä¿¡æ¯\r\n      communityQueryDto: {\r\n        // æœç´¢æ¡ä»¶\r\n        current: 1, // å½“å‰é¡µ - åˆå§‹æ˜¯ç¬¬ä¸€é¡µ\r\n        size: 10 // é¡µé¢æ˜¾ç¤ºå¤§å° - åˆå§‹æ˜¯10æ¡\r\n      },\r\n      coverList: [], // å°åŒºå®å†µå›¾å›¾ç‰‡é“¾æ¥æ•°ç»„\r\n      dialogDeletedVisible: false // åˆ é™¤å¼¹çª—æ§åˆ¶å¼€å…³å˜é‡ - åˆå§‹æ˜¯å…³ï¼ˆfalseï¼‰\r\n    };\r\n  },\r\n  watch: {\r\n    queryCityAreaId(newVal, oldValue) {\r\n      this.communityQueryDto.areaId = newVal;\r\n      this.fetchFreshData();\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchFreshData();\r\n    this.fetchTopArea();\r\n  },\r\n  methods: {\r\n    reset() {\r\n      this.communityQueryDto.areaId = null;\r\n      this.topAreaId = null;\r\n      this.queryCityAreaId = null;\r\n      this.fetchFreshData();\r\n    },\r\n    handleCityQuery() {\r\n      console.log(this.queryCityAreaId);\r\n    },\r\n    saveCommunityOperation() {\r\n      this.handleClose();\r\n      this.drawer = true;\r\n    },\r\n    onListener(text) {\r\n      this.content = text;\r\n    },\r\n    handleCovers(response, file, fileList) {\r\n      this.coverList.push(response.data);\r\n      console.log(\"ä¸Šä¼ ï¼Œæ­¤æ—¶çš„å›¾ç‰‡æ•°ç»„ï¼š\", this.coverList);\r\n    },\r\n    handleRemove(file, fileList) {\r\n      if (fileList.length === 0) return;\r\n      this.coverList = this.coverList.filter(\r\n        entity => entity !== fileList[0].response.data\r\n      );\r\n      console.log(\"ç§»é™¤ï¼Œæ­¤æ—¶çš„å›¾ç‰‡æ•°ç»„ï¼š\", this.coverList);\r\n    },\r\n    handlePictureCardPreview(file) {\r\n      this.dialogImageUrl = file.url;\r\n      this.dialogVisible = true;\r\n    },\r\n    // æ–°å¢å°åŒºä¿¡æ¯\r\n    async saveCommunity() {\r\n      try {\r\n        this.community.cover = this.cover;\r\n        this.community.detail = this.content;\r\n        this.community.areaId = this.cityAreaId;\r\n        this.community.covers =\r\n          this.coverList.length === 0 ? null : this.coverList.join(\",\");\r\n        await this.$axios.post(\"/community/save\", this.community);\r\n        this.handleClose();\r\n        this.$notify({\r\n          title: \"å°åŒºæ–°å¢\",\r\n          type: \"success\",\r\n          message: \"å°åŒºæ–°å¢æˆåŠŸ\",\r\n          position: \"buttom-right\",\r\n          suration: 1000\r\n        });\r\n        this.fetchFreshData();\r\n      } catch (error) {\r\n        console.log(\"æ–°å¢å°åŒºä¿¡æ¯å¼‚å¸¸ï¼š\", error);\r\n        this.$notify({\r\n          title: \"å°åŒºæ–°å¢\",\r\n          type: \"info\",\r\n          message: error.message,\r\n          position: \"buttom-right\",\r\n          suration: 1000\r\n        });\r\n      }\r\n    },\r\n    // å¤´åƒä¸Šä¼ å“åº”\r\n    handleImageSuccess(res, file) {\r\n      // é€šçŸ¥æç¤º\r\n      this.$notify({\r\n        title: \"å°é¢ä¸Šä¼ \",\r\n        type: res.code === 200 ? \"success\" : \"error\",\r\n        message: res.code === 200 ? \"ä¸Šä¼ æˆåŠŸ\" : res.data,\r\n        position: \"buttom-right\",\r\n        suration: 1000\r\n      });\r\n      if (res.code === 200) {\r\n        this.cover = res.data; // å“åº”é‡Œé¢çš„dataï¼Œå³åç«¯è¿”å›çš„ä¸Šä¼ åçš„å›¾ç‰‡é“¾æ¥\r\n      }\r\n    },\r\n    async fetchTopArea() {\r\n      try {\r\n        const areaQueryDto = { parentId: 0 };\r\n        const { data } = await this.$axios.post(\"/area/list\", areaQueryDto);\r\n        this.topArea = data;\r\n      } catch (error) {\r\n        console.log(\"æŸ¥è¯¢çœä»½ä¿¡æ¯å¼‚å¸¸ï¼š\", error);\r\n      }\r\n    },\r\n    async handleAreaChange() {\r\n      this.cityAreaId = null;\r\n      try {\r\n        const areaQueryDto = { parentId: this.topAreaId };\r\n        const { data } = await this.$axios.post(\"/area/list\", areaQueryDto);\r\n        this.cityArea = data;\r\n      } catch (error) {\r\n        console.log(\"æŸ¥è¯¢çœä»½ä¸‹çš„å¸‚åŒºä¿¡æ¯å¼‚å¸¸ï¼š\", error);\r\n      }\r\n    },\r\n    last() {\r\n      if (this.active-- <= 0) this.active = 2;\r\n    },\r\n    next() {\r\n      if (this.active++ > 2) this.active = 0;\r\n    },\r\n    handleChange(val) {\r\n      this.communityQueryDto.isAudit = Number(val.value);\r\n      this.fetchFreshData();\r\n    },\r\n    handleClose() {\r\n      this.drawer = false;\r\n      this.cover = \"\";\r\n      this.active = 0;\r\n      this.covers = [];\r\n      this.coverList = [];\r\n      this.topAreaId = null;\r\n      this.cityAreaId = null;\r\n      this.content = \"\";\r\n      this.community = {};\r\n    },\r\n    handleDetail(data) {\r\n      this.dialogCommunityVisible = true;\r\n      this.community = data;\r\n      this.carouselItems = data.covers.split(\",\").map(entity => {\r\n        return {\r\n          image: entity,\r\n          title: data.name,\r\n          subtitle: data.topAreaName + \"Â·\" + data.cityAreaName\r\n        };\r\n      });\r\n    },\r\n    // è¾“å…¥æ¡†ç»„ä»¶è¾“å…¥å›ä¼ \r\n    listener(text) {\r\n      this.communityQueryDto.name = text; // èµ‹å€¼æŸ¥è¯¢æ¡ä»¶çš„å†…å®¹\r\n      this.fetchFreshData(); // é‡æ–°åŠ è½½æ•°æ®\r\n    },\r\n    async auditcommunity() {\r\n      try {\r\n        const community = {\r\n          id: this.community.id,\r\n          isAudit: true\r\n        };\r\n        await this.$axios.put(\"/community/update\", community);\r\n        this.$message.success(\"å®¡æ ¸æˆåŠŸ\");\r\n        this.drawer = false; // å…³é—­è¯¦æƒ…æŠ½å±‰\r\n        this.fetchFreshData(); // é‡æ–°åŠ è½½å°åŒºæ•°æ®\r\n      } catch (error) {\r\n        this.$message.info(error.message);\r\n        console.error(\"å®¡æ ¸å°åŒºä¿¡æ¯ä¿¡æ¯å¼‚å¸¸:\", error);\r\n      }\r\n    },\r\n    // æŸ¥è¯¢å°åŒºä¿¡æ¯æ•°æ®\r\n    async fetchFreshData() {\r\n      try {\r\n        const { data, total } = await this.$axios.post(\r\n          \"/community/list\",\r\n          this.communityQueryDto\r\n        );\r\n        this.apiResult.data = data;\r\n        this.apiResult.total = total;\r\n      } catch (error) {\r\n        console.error(\"æŸ¥è¯¢å°åŒºä¿¡æ¯ä¿¡æ¯å¼‚å¸¸:\", error);\r\n      }\r\n    },\r\n    // åˆ†é¡µ - å¤„ç†é¡µé¢é¡µæ•°åˆ‡æ¢\r\n    handleSizeChange(size) {\r\n      this.communityQueryDto.size = size; // å½“å‰é¡µé¢å¤§å°é‡ç½®\r\n      this.communityQueryDto.currrent = 1; // å½“å‰é¡µè®¾ç½®ä¸ºç¬¬ä¸€é¡µ\r\n      this.fetchFreshData(); // é‡æ–°åŠ è½½é¡µé¢æ•°æ®\r\n    },\r\n    // åˆ†é¡µ - å¤„ç†é¡µé¢å½“å‰é¡µåˆ‡æ¢\r\n    handleCurrentChange(current) {\r\n      this.communityQueryDto.current = current; // å½“å‰é¡µé€‰ä¸­\r\n      this.fetchFreshData(); // é‡æ–°åŠ è½½é¡µé¢æ•°æ®\r\n    },\r\n    // è¡¨æ ¼ç‚¹å‡»åˆ é™¤å°åŒºä¿¡æ¯\r\n    handleDelete(row) {\r\n      this.dialogDeletedVisible = true; // å¼€å¯åˆ é™¤å¼¹çª—ç¡®è®¤\r\n      this.id = row.id;\r\n    },\r\n    // å°åŒºä¿¡æ¯åˆ é™¤\r\n    async confirmDeleted() {\r\n      try {\r\n        const { code } = await this.$axios.delete(`/community/${this.id}`);\r\n        if (code === 200) {\r\n          this.$notify.success({\r\n            title: \"å°åŒºä¿¡æ¯åˆ é™¤\",\r\n            message: \"åˆ é™¤æˆåŠŸ\",\r\n            position: \"buttom-right\",\r\n            suration: 1000\r\n          });\r\n          this.dialogDeletedVisible = false; // å…³é—­åˆ é™¤ç¡®è®¤å¼¹çª—\r\n          this.id = null; // å°†æ ‡è¯†IDç½®ä½\r\n          this.fetchFreshData(); // åˆ é™¤å°åŒºä¿¡æ¯æ•°æ®ä¹‹åï¼Œé‡æ–°åŠ è½½å°åŒºä¿¡æ¯æ•°æ®\r\n        }\r\n      } catch (error) {\r\n        console.log(\"åˆ é™¤å°åŒºä¿¡æ¯æ•°æ®å¼‚å¸¸ï¼š\", error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.pager {\r\n  margin-block: 20px;\r\n}\r\n\r\n/* é»˜è®¤éšè—æ“ä½œæŒ‰é’® */\r\n.operate-buttons {\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n  /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */\r\n  cursor: pointer;\r\n\r\n  i {\r\n    padding: 8px;\r\n    border-radius: 6px;\r\n    transition: all 0.5s ease;\r\n\r\n    &:hover {\r\n      background-color: rgb(236, 237, 238);\r\n    }\r\n  }\r\n}\r\n\r\n/* è¡Œæ‚¬åœæ—¶æ˜¾ç¤ºæ“ä½œæŒ‰é’® */\r\n.el-table__body tr:hover .operate-buttons {\r\n  opacity: 1;\r\n}\r\n\r\n.container {\r\n  margin: 10px 20px;\r\n}\r\n\r\n.top-healder {\r\n  margin-block: 10px;\r\n  padding-inline: 10px;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  .nav-left,\r\n  .nav-right {\r\n    display: flex;\r\n    justify-content: left;\r\n    align-items: center;\r\n    gap: 10px;\r\n  }\r\n\r\n  .nav-left {\r\n    display: flex;\r\n  }\r\n}\r\n</style>\r\n"]}]}