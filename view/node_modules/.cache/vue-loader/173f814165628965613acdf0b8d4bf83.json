{"remainingRequest":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desktop\\rent\\view\\src\\views\\admin\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\desktop\\rent\\view\\src\\views\\admin\\Home.vue","mtime":1765360599832},{"path":"D:\\desktop\\rent\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765027958923},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1765027963512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldCB9IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIvaW5kZXgiOwppbXBvcnQgewogIGNsZWFyVG9rZW4sCiAgY2xlYXJSb2xlLAogIGNsZWFyVXNlckluZm8sCiAgc2V0VXNlckluZm8KfSBmcm9tICJAL3V0aWxzL3N0b3JhZ2UiOwppbXBvcnQgTWVudSBmcm9tICJAL2NvbXBvbmVudHMvTWVudS52dWUiOwppbXBvcnQgVXBkYXRlUGFzc3dvcmQgZnJvbSAiQC92aWV3cy9hZG1pbi9VcGRhdGVQYXNzd29yZC52dWUiOwppbXBvcnQgTGV2ZWxIZWFkZXIgZnJvbSAiQC9jb21wb25lbnRzL0xldmVsSGVhZGVyLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImFkbWluLWxheW91dCIsCiAgY29tcG9uZW50czogeyBMZXZlbEhlYWRlciwgTWVudSwgVXBkYXRlUGFzc3dvcmQgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nUGFzc3dvcmRWaXNpYmxlOiBmYWxzZSwgLy8g6YCA5Ye655m75b2V5by556qX5byA5YWzCiAgICAgIGFkbWluUm91dGVzOiBbXSwgLy8g566h55CG5ZGY6Lev55Sx5L+h5oGvCiAgICAgIHVzZXJJbmZvOiB7fSwgLy8g55So5oi35L+h5oGvCiAgICAgIGFjdGl2ZVJvdXRlOiB7fSwKICAgICAgbG9nb0NvbG9yOiAicmdiKDUxLDUxLDUxKSIsIC8vIExvZ2/lrZfkvZPpopzoibIKICAgICAgbWVudUJnQ29sb3I6ICJyZ2IoMjUwLDI1MCwyNTApIiAvLyDlip/og73lr7zoiKrmoI/og4zmma/oibIKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkQWRtaW5Sb3V0ZXMoKTsKICAgIHRoaXMuY2hlY2tUb2tlbkFuZExvYWRVc2VyKCk7CiAgICB0aGlzLmhhbmRsZVJvdXRlU2VsZWN0KCIvYWRtaW5MYXlvdXQiKTsgLy8g6buY6K6k5Yqg6L296aaW6aG1CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVMb2dpbk91dCgpIHsKICAgICAgY2xlYXJUb2tlbigpOwogICAgICBjbGVhclJvbGUoKTsKICAgICAgY2xlYXJVc2VySW5mbygpOwogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIumAgOWHuueZu+W9leaIkOWKnyIpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9LAoKICAgIC8vIOi3r+eUseWIh+aNogogICAgcm91dGUoYWN0aXZlUm91dGUpIHsKICAgICAgdGhpcy5hY3RpdmVSb3V0ZSA9IGFjdGl2ZVJvdXRlOwogICAgfSwKCiAgICAvLyDot6/nlLHot7PovawKICAgIGhhbmRsZVJvdXRlU2VsZWN0KHJvdXRlUGF0aCkgewogICAgICBjb25zdCByb3V0ZSA9IHRoaXMuYWRtaW5Sb3V0ZXMuZmluZChyID0+IHIucGF0aCA9PT0gcm91dGVQYXRoKTsKICAgICAgaWYgKHJvdXRlKSB7CiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09IHJvdXRlUGF0aCkgewogICAgICAgICAgdGhpcy5hY3RpdmVSb3V0ZSA9IHsgLi4ucm91dGUgfTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHJvdXRlUGF0aCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIC8vIOWKoOi9veeuoeeQhuWRmOi3r+eUsQogICAgbG9hZEFkbWluUm91dGVzKCkgewogICAgICBjb25zdCBhZG1pblJvdXRlID0gcm91dGVyLm9wdGlvbnMucm91dGVzLmZpbmQociA9PiByLnBhdGggPT09ICIvYWRtaW4iKTsKICAgICAgdGhpcy5hZG1pblJvdXRlcyA9IChhZG1pblJvdXRlICYmIGFkbWluUm91dGUuY2hpbGRyZW4pIHx8IFtdOwogICAgfSwKCiAgICAvLyDmo4Dmn6XnlKjmiLfnmbvlvZXnirbmgIEgLSDmoKHpqoxUb2tlbuS7pOeJjAogICAgYXN5bmMgY2hlY2tUb2tlbkFuZExvYWRVc2VyKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2V0KCJ1c2VyL2F1dGgiKTsKCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDQwMCkgewogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICJ0b2tlbuagoemqjOW8guW4uCIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UsCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgICAgICB9KTsKICAgICAgICAgIGNsZWFyVG9rZW4oKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudXNlckluZm8gPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBzZXRVc2VySW5mbyh0aGlzLnVzZXJJbmZvKTsgLy8g5a2Y5YKo55So5oi35L+h5oGvCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigidG9rZW7orqTor4HplJnor6/jgIxIb21lLnZ1ZeOAjToiLCBlcnJvcik7CiAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgIHRpdGxlOiAidG9rZW7moKHpqozlvILluLgs6K+36YeN5paw55m75b2VIiwKICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgIH0pOwogICAgICAgIGNsZWFyVG9rZW4oKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\n  <div class=\"admin-layout\">\n    <!-- 左侧导航菜单 - 菜单组件 -->\n    <aside class=\"sidebar\">\n      <Menu\n        @route-listener=\"route\"\n        :routes=\"adminRoutes\"\n        :bag=\"menuBgColor\"\n        @select=\"handleRouteSelect\"\n      />\n    </aside>\n    <!-- 右侧内容区域 -->\n    <main class=\"content-area\">\n      <div class=\"top-info\">\n        <div class=\"point-text\">{{ activeRoute.name }}</div>\n        <div class=\"user-info\">\n          <el-dropdown trigger=\"click\" placement=\"bottom-end\">\n            <span class=\"el-dropdown-link\">\n              <div class=\"dropdown-info\">\n                <img :src=\"userInfo.avatar\" />\n                <span>{{ userInfo.username }}</span>\n              </div>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item\n                @click.native=\"dialogPasswordVisible = true\"\n                icon=\"el-icon-view\"\n              >\n                修改密码\n              </el-dropdown-item>\n              <el-dropdown-item\n                @click.native=\"handleLoginOut\"\n                icon=\"el-icon-s-fold\"\n              >\n                退出登录\n              </el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </div>\n      </div>\n      <section class=\"router-view\">\n        <router-view></router-view>\n      </section>\n    </main>\n\n    <el-dialog\n      title=\"修改密码\"\n      :visible.sync=\"dialogPasswordVisible\"\n      :closeOnClickModal=\"false\"\n      width=\"35%\"\n    >\n      <UpdatePassword />\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { get } from \"@/utils/request\";\nimport router from \"@/router/index\";\nimport {\n  clearToken,\n  clearRole,\n  clearUserInfo,\n  setUserInfo\n} from \"@/utils/storage\";\nimport Menu from \"@/components/Menu.vue\";\nimport UpdatePassword from \"@/views/admin/UpdatePassword.vue\";\nimport LevelHeader from \"@/components/LevelHeader.vue\";\n\nexport default {\n  name: \"admin-layout\",\n  components: { LevelHeader, Menu, UpdatePassword },\n  data() {\n    return {\n      dialogPasswordVisible: false, // 退出登录弹窗开关\n      adminRoutes: [], // 管理员路由信息\n      userInfo: {}, // 用户信息\n      activeRoute: {},\n      logoColor: \"rgb(51,51,51)\", // Logo字体颜色\n      menuBgColor: \"rgb(250,250,250)\" // 功能导航栏背景色\n    };\n  },\n  created() {\n    this.loadAdminRoutes();\n    this.checkTokenAndLoadUser();\n    this.handleRouteSelect(\"/adminLayout\"); // 默认加载首页\n  },\n  methods: {\n    handleLoginOut() {\n      clearToken();\n      clearRole();\n      clearUserInfo();\n      this.$message.success(\"退出登录成功\");\n      this.$router.push(\"/login\");\n    },\n\n    // 路由切换\n    route(activeRoute) {\n      this.activeRoute = activeRoute;\n    },\n\n    // 路由跳转\n    handleRouteSelect(routePath) {\n      const route = this.adminRoutes.find(r => r.path === routePath);\n      if (route) {\n        if (this.$route.path !== routePath) {\n          this.activeRoute = { ...route };\n          this.$router.push(routePath);\n        }\n      }\n    },\n\n    // 加载管理员路由\n    loadAdminRoutes() {\n      const adminRoute = router.options.routes.find(r => r.path === \"/admin\");\n      this.adminRoutes = (adminRoute && adminRoute.children) || [];\n    },\n\n    // 检查用户登录状态 - 校验Token令牌\n    async checkTokenAndLoadUser() {\n      try {\n        const response = await get(\"user/auth\");\n\n        if (response.code === 400) {\n          this.$notify.error({\n            title: \"token校验异常\",\n            message: response.message,\n            duration: 2000\n          });\n          clearToken();\n          this.$router.push(\"/login\");\n        }\n\n        this.userInfo = response.data;\n\n        setUserInfo(this.userInfo); // 存储用户信息\n      } catch (error) {\n        console.error(\"token认证错误「Home.vue」:\", error);\n        this.$notify.error({\n          title: \"token校验异常,请重新登录\",\n          message: error.message,\n          duration: 2000\n        });\n        clearToken();\n        this.$router.push(\"/login\");\n      }\n    }\n  }\n};\n</script>\n\n<style scoped lang=\"scss\">\n.admin-layout {\n  display: flex;\n  height: 100vh;\n  width: 100%;\n  background-color: rgb(250, 250, 250);\n\n  .sidebar {\n    width: 206px;\n    min-width: 60px;\n    height: 100vh;\n    box-sizing: border-box;\n    padding-top: 10px;\n    background-color: rgb(250, 250, 250);\n    background-color: v-bind(menuBgColor);\n    transition: width 0.3s ease;\n    position: relative;\n\n    .logo-container {\n      display: flex;\n      align-items: center;\n      padding: 0 40px;\n      margin: 10px 0;\n    }\n  }\n\n  .dropdown-info {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 6px;\n    cursor: pointer;\n    background-color: rgb(248, 248, 248);\n    padding: 4px 10px;\n    border-radius: 10px;\n\n    &:hover {\n      background-color: rgb(239, 240, 240);\n    }\n\n    img {\n      width: 30px;\n      height: 30px;\n      border-radius: 50%;\n    }\n\n    span {\n      font-size: 16px;\n    }\n  }\n\n  .content-area {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    background-color: rgb(255, 255, 255);\n\n    .top-info {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      padding: 20px 40px;\n\n      .point-text {\n        font-size: 22px;\n      }\n    }\n\n    .router-view {\n      flex: 1;\n      padding: 0 6px;\n      overflow-y: auto;\n    }\n  }\n}\n</style>\n"]}]}