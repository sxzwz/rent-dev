{"remainingRequest":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\desktop\\rent\\view\\src\\views\\admin\\LandlordManage.vue?vue&type=style&index=0&id=550cf05f&scoped=true&lang=scss&","dependencies":[{"path":"D:\\desktop\\rent\\view\\src\\views\\admin\\LandlordManage.vue","mtime":1765885081031},{"path":"D:\\desktop\\rent\\view\\node_modules\\css-loader\\dist\\cjs.js","mtime":1765027960330},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1765027965207},{"path":"D:\\desktop\\rent\\view\\node_modules\\postcss-loader\\src\\index.js","mtime":1765027962540},{"path":"D:\\desktop\\rent\\view\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1765027958888},{"path":"D:\\desktop\\rent\\view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1765027958923},{"path":"D:\\desktop\\rent\\view\\node_modules\\vue-loader\\lib\\index.js","mtime":1765027963512}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnBhZ2VyIHsNCiAgbWFyZ2luLWJsb2NrOiAyMHB4Ow0KfQ0KDQovKiDpu5jorqTpmpDol4/mk43kvZzmjInpkq4gKi8NCi5vcGVyYXRlLWJ1dHRvbnMgew0KICBvcGFjaXR5OiAwOw0KICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3M7DQogIC8qIOa3u+WKoOi/h+a4oeaViOaenCAqLw0KICBjdXJzb3I6IHBvaW50ZXI7DQoNCiAgaSB7DQogICAgcGFkZGluZzogOHB4Ow0KICAgIGJvcmRlci1yYWRpdXM6IDZweDsNCiAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlOw0KDQogICAgJjpob3ZlciB7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjM2LCAyMzcsIDIzOCk7DQogICAgfQ0KICB9DQp9DQoNCi8qIOihjOaCrOWBnOaXtuaYvuekuuaTjeS9nOaMiemSriAqLw0KLmVsLXRhYmxlX19ib2R5IHRyOmhvdmVyIC5vcGVyYXRlLWJ1dHRvbnMgew0KICBvcGFjaXR5OiAxOw0KfQ0KDQouY29udGFpbmVyIHsNCiAgbWFyZ2luOiAxMHB4IDIwcHg7DQp9DQoNCi50b3AtaGVhbGRlciB7DQogIG1hcmdpbi1ibG9jazogMTBweDsNCiAgcGFkZGluZy1pbmxpbmU6IDEwcHg7DQogIGJvcmRlci1yYWRpdXM6IDVweDsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICBhbGlnbi1pdGVtczogY2VudGVyOw0KDQogIC5uYXYtbGVmdCwNCiAgLm5hdi1yaWdodCB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGxlZnQ7DQogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICBnYXA6IDEwcHg7DQogIH0NCg0KICAubmF2LWxlZnQgew0KICAgIGRpc3BsYXk6IGZsZXg7DQogIH0NCn0NCg=="},{"version":3,"sources":["LandlordManage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoTA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"LandlordManage.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <div class=\"top-healder\">\r\n      <div class=\"nav-left\">\r\n        <Tab\r\n          :buttons=\"[\r\n            { label: '全部', value: 'null' },\r\n            { label: '未审核', value: '0' },\r\n            { label: '已审核', value: '1' }\r\n          ]\"\r\n          initialActive=\"null\"\r\n          @change=\"handleChange\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"nav-right\">\r\n        <div>\r\n          <AutoInput placeholder=\"搜索身份证号\" @listener=\"listener\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 表格及分页信息 -->\r\n    <div>\r\n      <el-table :data=\"apiResult.data\">\r\n        <el-table-column width=\"200\" prop=\"username\" label=\"申请人\">\r\n          <template #default=\"scope\">\r\n            <div class=\"over-text\">\r\n              {{ scope.row.username }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column width=\"300\" prop=\"content\" label=\"身份证号\">\r\n          <template #default=\"scope\">\r\n            <div class=\"over-text\">\r\n              {{ scope.row.idcard }}\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"parentId\"\r\n          :sortable=\"true\"\r\n          width=\"108\"\r\n          label=\"审核状态\"\r\n        >\r\n          <template #default=\"scope\">\r\n            <el-tag\r\n              :type=\"scope.row.isAudit ? 'success' : 'danger'\"\r\n              size=\"mini\"\r\n              >{{ scope.row.isAudit ? \"已审核\" : \"未审核\" }}</el-tag\r\n            >\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column\r\n          prop=\"createTime\"\r\n          :sortable=\"true\"\r\n          width=\"168\"\r\n          label=\"申请时间\"\r\n        ></el-table-column>\r\n\r\n        <el-table-column label=\"\" align=\"center\">\r\n          <template #default=\"scope\">\r\n            <div class=\"operate-buttons\">\r\n              <el-dropdown trigger=\"click\" placement=\"bottom-end\">\r\n                <span class=\"el-dropdown-link\">\r\n                  <i class=\"el-icon-more\"></i>\r\n                </span>\r\n\r\n                <el-dropdown-menu slot=\"dropdown\">\r\n                  <el-dropdown-item\r\n                    @click.native=\"handleDetail(scope.row)\"\r\n                    icon=\"el-icon-finished\"\r\n                    >详情</el-dropdown-item\r\n                  >\r\n\r\n                  <el-dropdown-item\r\n                    @click.native=\"handleDelete(scope.row)\"\r\n                    icon=\"el-icon-delete\"\r\n                    >删除</el-dropdown-item\r\n                  >\r\n                </el-dropdown-menu>\r\n              </el-dropdown>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页组件区域 -->\r\n      <div class=\"pager\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"landlordQueryDto.current\"\r\n          :page-sizes=\"[10, 20]\"\r\n          :page-size=\"landlordQueryDto.size\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"apiResult.total\"\r\n        ></el-pagination>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 删除确认弹窗 -->\r\n    <el-dialog\r\n      title=\"删除房东信息\"\r\n      :show-close=\"false\"\r\n      :visible.sync=\"dialogDeletedVisible\"\r\n      width=\"20%\"\r\n    >\r\n      <span>确定删除房东信息数据？</span>\r\n\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button size=\"mini\" @click=\"dialogDeletedVisible = false\"\r\n          >取消</el-button\r\n        >\r\n\r\n        <el-button size=\"mini\" type=\"primary\" @click=\"confirmDeleted\"\r\n          >确定</el-button\r\n        >\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 房东申请信息抽屉 -->\r\n    <el-drawer\r\n      title=\"房东申请信息\"\r\n      :modal=\"false\"\r\n      :wrapperClosable=\"false\"\r\n      :visible.sync=\"drawer\"\r\n      :direction=\"direction\"\r\n      size=\"70%\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <div\r\n        style=\"gap: 30px;display: flex;justify-content: center;align-items: center;\"\r\n      >\r\n        <div>\r\n          <img\r\n            style=\"width: 80px;height: 80px;border-radius: 50%;\"\r\n            :src=\"landlord.avatar\"\r\n            alt=\"\"\r\n            srcset=\"\"\r\n          />\r\n          <div style=\"text-align: center;font-size: 24px;\">\r\n            {{ landlord.username }}\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          style=\"width: 600px;background-color: rgb(250,250,250);padding: 20px 60px;box-shadow: 0 4px 8px rgb(240,240,240);border-radius: 5px;\"\r\n        >\r\n          <div>\r\n            <p>*身份证号</p>\r\n\r\n            <div style=\"font-size: 18px;\">{{ landlord.idcard }}</div>\r\n          </div>\r\n\r\n          <div style=\"display: flex;\">\r\n            <div>\r\n              <p>*身份证正面照</p>\r\n\r\n              <img\r\n                style=\"width: 200px;height: 140px;\"\r\n                :src=\"landlord.idcardFront\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <p>*身份证反面照</p>\r\n\r\n              <img\r\n                style=\"width: 200px;height: 140px;\"\r\n                :src=\"landlord.idcardOpposite\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        v-if=\"!landlord.isAudit\"\r\n        style=\"text-align: center;margin-top: 30px;\"\r\n      >\r\n        <span @click=\"auditLandlord\" class=\"info-bt\"\r\n          ><i class=\"el-icon-finished\" style=\"margin-right: 5px;\"></i\r\n          >通过审核</span\r\n        >\r\n      </div>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport AutoInput from \"@/components/AutoInput.vue\"; // 自己封装好的输入框组件\r\nimport Tab from \"@/components/Tab.vue\";\r\nexport default {\r\n  components: { AutoInput, Tab }, // 注册组件\r\n  data() {\r\n    return {\r\n      drawer: false,\r\n      direction: \"ttb\",\r\n      id: null, // 页面即将删除的数据ID\r\n      apiResult: {\r\n        // 后端返回的查询数据的响应数据\r\n        data: [], // 数据项\r\n        total: 0 // 符合条件的数据总想 - 初始赋值为0\r\n      },\r\n      landlord: {}, // 房东信息\r\n      landlordQueryDto: {\r\n        // 搜索条件\r\n        current: 1, // 当前页 - 初始是第一页\r\n        size: 10 // 页面显示大小 - 初始是10条\r\n      },\r\n      dialogDeletedVisible: false // 删除弹窗控制开关变量 - 初始是关（false）\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchFreshData();\r\n  },\r\n  methods: {\r\n    handleChange(val) {\r\n      this.landlordQueryDto.isAudit = Number(val.value);\r\n      this.fetchFreshData();\r\n    },\r\n    handleClose() {\r\n      this.drawer = false;\r\n    },\r\n    handleDetail(data) {\r\n      this.drawer = true;\r\n      this.landlord = data;\r\n    },\r\n    // 输入框组件输入回传\r\n    listener(text) {\r\n      this.landlordQueryDto.idcard = text; // 赋值查询条件的内容\r\n      this.fetchFreshData(); // 重新加载数据\r\n    },\r\n    async auditLandlord() {\r\n      try {\r\n        const landlord = {\r\n          id: this.landlord.id,\r\n          isAudit: true\r\n        };\r\n        await this.$axios.put(\"/landlord/update\", landlord);\r\n        this.$message.success(\"审核成功\");\r\n        this.drawer = false; // 关闭详情抽屉\r\n        this.fetchFreshData(); // 重新加载房东数据\r\n      } catch (error) {\r\n        this.$message.info(error.message);\r\n        console.error(\"审核房东信息信息异常:\", error);\r\n      }\r\n    },\r\n    // 查询房东信息数据\r\n    async fetchFreshData() {\r\n      try {\r\n        const { data, total } = await this.$axios.post(\r\n          \"/landlord/list\",\r\n          this.landlordQueryDto\r\n        );\r\n        this.apiResult.data = data;\r\n        this.apiResult.total = total;\r\n      } catch (error) {\r\n        console.error(\"查询房东信息信息异常:\", error);\r\n      }\r\n    },\r\n    // 分页 - 处理页面页数切换\r\n    handleSizeChange(size) {\r\n      this.landlordQueryDto.size = size; // 当前页面大小重置\r\n      this.landlordQueryDto.currrent = 1; // 当前页设置为第一页\r\n      this.fetchFreshData(); // 重新加载页面数据\r\n    },\r\n    // 分页 - 处理页面当前页切换\r\n    handleCurrentChange(current) {\r\n      this.landlordQueryDto.current = current; // 当前页选中\r\n      this.fetchFreshData(); // 重新加载页面数据\r\n    },\r\n    // 表格点击删除房东信息\r\n    handleDelete(row) {\r\n      this.dialogDeletedVisible = true; // 开启删除弹窗确认\r\n      this.id = row.id;\r\n    },\r\n    // 房东信息删除\r\n    async confirmDeleted() {\r\n      try {\r\n        const { code } = await this.$axios.delete(`/landlord/${this.id}`);\r\n        if (code === 200) {\r\n          this.$notify.success({\r\n            title: \"房东信息删除\",\r\n            message: \"删除成功\",\r\n            position: \"buttom-right\",\r\n            suration: 1000\r\n          });\r\n          this.dialogDeletedVisible = false; // 关闭删除确认弹窗\r\n          this.id = null; // 将标识ID置位\r\n          this.fetchFreshData(); // 删除房东信息数据之后，重新加载房东信息数据\r\n        }\r\n      } catch (error) {\r\n        console.log(\"删除房东信息数据异常：\", error);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.pager {\r\n  margin-block: 20px;\r\n}\r\n\r\n/* 默认隐藏操作按钮 */\r\n.operate-buttons {\r\n  opacity: 0;\r\n  transition: opacity 0.3s;\r\n  /* 添加过渡效果 */\r\n  cursor: pointer;\r\n\r\n  i {\r\n    padding: 8px;\r\n    border-radius: 6px;\r\n    transition: all 0.5s ease;\r\n\r\n    &:hover {\r\n      background-color: rgb(236, 237, 238);\r\n    }\r\n  }\r\n}\r\n\r\n/* 行悬停时显示操作按钮 */\r\n.el-table__body tr:hover .operate-buttons {\r\n  opacity: 1;\r\n}\r\n\r\n.container {\r\n  margin: 10px 20px;\r\n}\r\n\r\n.top-healder {\r\n  margin-block: 10px;\r\n  padding-inline: 10px;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  .nav-left,\r\n  .nav-right {\r\n    display: flex;\r\n    justify-content: left;\r\n    align-items: center;\r\n    gap: 10px;\r\n  }\r\n\r\n  .nav-left {\r\n    display: flex;\r\n  }\r\n}\r\n</style>\r\n"]}]}